<div *ngIf="loading">Loading...</div>
<div *ngIf="error">{{ error }}</div>

<div *ngIf="merit" class="detail-container">
  <!-- Title -->
  <header class="header-row">
    <h2>{{ merit?.title }}</h2>
  </header>

  <!-- Date -->
  <section class="date-section">
    <time class="merit-date">{{ merit.date | date : "mediumDate" }}</time>
  </section>

  <!-- Description -->
  <section class="description-section">
    <h3>විස්තරය</h3>
    <h2 class="description">{{ merit?.description }}</h2>
  </section>

  <!-- Receiver -->
  <section class="receiver-section" *ngIf="merit?.receiver">
    <h3>ප්‍රතිග්‍රාහකයා</h3>
    <h2 class="receiver">{{ merit?.receiver }}</h2>
  </section>

  <!-- Images -->
  <section
    class="images-section"
    *ngIf="merit.image_urls && merit.image_urls.length > 0"
  >
    <h3 class="sub-title">ඡායාරූප</h3>
    <app-image-gallery [images]="merit.image_urls"></app-image-gallery>
  </section>

  <!-- Video URLs -->
  <section
    *ngIf="merit.video_urls && merit.video_urls.length > 0"
    class="video-list"
  >
    <h3 class="sub-title">වීඩියෝ</h3>
    <div *ngFor="let url of videoUrls" style="margin-bottom: 1rem">
      <iframe
        [src]="url"
        width="640"
        height="480"
        allow="autoplay"
        frameborder="0"
      ></iframe>
    </div>
  </section>

  <!-- Buttons -->
  <div class="button-row">
    <button
      mat-stroked-button
      color="primary"
      (click)="onBack()"
      aria-label="Back"
    >
      ආපසු
      <mat-icon>arrow_back</mat-icon>
    </button>
    <ng-container *ngIf="isLoggedIn()">
      <button
        mat-flat-button
        color="accent"
        (click)="onEdit()"
        aria-label="Edit"
      >
        වෙනස් කිරීම්
        <mat-icon>edit</mat-icon>
      </button>
      <button
        mat-raised-button
        color="warn"
        (click)="onDelete()"
        aria-label="Delete"
      >
        මකන්න
        <mat-icon>delete</mat-icon>
      </button>
    </ng-container>
  </div>
</div>
